---
sidebar: sidebar 
permalink: view-evs-well-architected.html 
keywords: evs, well-architected, wad, best practices, recommendations, security, resiliency 
summary: Workload Factory で EVS 構成の well-architected ステータスを確認し、AWS と NetApp のベストプラクティスに基づく修復ガイダンスに従います。 
---
= 適切に設計されたEVS構成を実装する
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
Workload Factory 構成分析を使用して、Amazon Elastic VMware Service（EVS）構成の適切なアーキテクチャの状態を確認し、信頼性、セキュリティ、コストに影響する問題を修正します。



== タスク概要

AWS APIを使用して、検出されたすべてのEVS環境を毎日自動スキャンし、EVS設定を分析して、可用性、回復力、セキュリティ、またはコスト最適化に影響を与える可能性のある潜在的な問題を特定します。検出結果は設定領域ごとに整理され、各検出結果にはステータス、重大度レベル、影響を受けるリソースの詳細、および段階的な修復手順が含まれます。

主な機能は次のとおりです：

* *毎日の自動スキャン*：検出されたすべての EVS 環境は、分析情報が最新の状態に保たれるように、1 日に 1 回自動的にスキャンされます。
* *AWS API ベースのスキャン*: スキャンでは AWS API が使用され、vSphere 認証情報や vCenter への接続は必要ありません。
* *問題解決に関する詳細なガイダンス*：特定された各問題には、明確な説明、重大度レベル、および段階的な解決手順が含まれています。
* *表示専用の分析情報*：自動化された問題解決オプションなしで、詳細な調査結果と推奨事項を提供します。




=== 適切に設計されたインサイトを理解する

Well-architected タブには次の内容が表示されます：

* *Configuration name*：評価対象の構成領域。
* *タグ*：影響領域を示すラベル（可用性、回復力、セキュリティなど）。
* *Status*：「Optimized」（問題は見つかりません）または「Not optimized」（問題が見つかりました）。
* *重大度*：検出結果の重要度レベル（例：警告）。
* *リソースタイプ*：評価対象の AWS リソースのタイプ。
* *影響を受けるリソース数*：問題の影響を受けるリソースの数。




=== スキャン頻度

検出されたすべてのEVS構成に対して、Well-Architectedスキャンが自動的に実行されます。スキャンスケジュールに関する主な詳細：

* スキャンは、EVS 構成ごとに 1 日に 1 回実行されます。
* 異なる構成のスキャンは、異なる時間に実行される可能性があります。
* 1 つの構成のスキャンが失敗した場合でも、同じアカウント内の他の構成のスキャンは試行されます。
* Well-architected ステータス タブのタイムスタンプ カードには、現在の構成の最後のスキャンがいつ完了したかが表示されます。



NOTE: Well-Architectedスキャンのオンデマンド実行は現在サポートされていません。すべてのスキャンは毎日のスケジュールで自動的に実行されます。



== 開始する前に

*  https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["AWS認証情報を追加しました"^]VMware ワークロードに対する _表示、計画、および分析_ 権限を持っている必要があります。
* AWS アカウントには、検出された Amazon Elastic VMware Service 環境が少なくとも 1 つ必要です。




== Well-Architected ステータス タブにアクセスする

.手順
. 次のいずれかを使用してWorkload Factoryにログインします。 https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["コンソールエクスペリエンス"^] 。
. メニューを選択 image:workloads-menu-icon.png["ハンバーガー メニュー アイコンは、ストレージ、eda、ai、データベース、vmware、管理などのワークロードに移動するために使用されます。"] 次に*VMware*を選択します。
+
プランニングセンターが表示されます。

. VMware メニューから、*Inventory* を選択します。
. *仮想化環境*リストから、Well-Architected Insightsを表示する検出されたEVS環境を選択します。
. *Well-architected status* タブを選択します。
+
次の要素が表示されます：

+
** *自動日次分析タイムスタンプ*：この環境で最後にスキャンが実行された日時を表示します。
** *構成*：構成領域ごとに結果を整理し、そのステータスと詳細を表示します。






== Well-Architected の評価を表示



=== クラスターノード管理

これにより、EVS クラスターノードに適切な EC2 停止および終了保護が設定されているかどうかが評価されます。

*状態*：

* *最適化*: すべての EVS ノードに EC2 停止保護と終了保護の両方が設定されています。
* *最適化されていません*：少なくとも 1 つの EVS ノードに EC2 停止保護または終了保護が設定されていません。


*これが重要な理由*：

EVS ESXiノードはvCenter、またはその他のVMwareレベルの管理ツールを使用してのみ管理する必要があります。適切なEC2レベルの保護がないと、EC2コンソールからノードが誤って停止または終了される可能性があり、仮想マシンのデータが利用できなくなったり、データが失われたりする可能性があります。

*詳細な調査結果を表示するには*：

. Well-architected ステータス タブで、*クラスター ノード管理*を見つけます。
. *表示*を選択して、結果ダイアログを開きます。


ダイアログには次の内容が表示されます：

* *調査結果の概要*：ご使用の環境で発見された問題の詳細な説明。
* *リソース グリッド*：すべての EVS ノードとその保護ステータスを表示するテーブル。これには次のものが含まれます：
+
** ノード識別子
** EC2 停止保護ステータス
** EC2 終了保護ステータス


* *必要なアクション*：問題を解決するための段階的な手順。
* *推奨事項*：ベスト プラクティス ガイダンス。


*修復*：

この問題を解決するには、EVS ノードの停止および終了保護を有効にします：

*  https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-stop-protection.html["停止保護を有効にするための AWS ドキュメント"^]に指定された手順に従ってください。
*  https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_ChangingDisableAPITermination.html["終了保護を有効にするための AWS ドキュメント"^]に指定された手順に従ってください。




=== EVS環境の回復力

これは、EVS クラスター ノードがパーティション配置グループ全体に適切に分散されているかどうかを評価します。

*状態*：

* *最適化*: すべてのノードは、4つ以上のパーティションで構成された単一のパーティション配置グループのメンバーです。
* 次のいずれかに該当する場合、*最適化されていません*：
+
** ノードは複数の配置グループのメンバーです。
** 少なくとも 1 つのノードが、パーティション化されていない配置グループのメンバーです。
** すべてのノードは、4つ未満のパーティションを持つパーティション化された配置グループのメンバーです。




*これが重要な理由*：

適切なパーティション配置により、EVS クラスターノードは AWS アベイラビリティゾーン内の障害から分離された複数のハードウェアパーティションに分散されます。配置が不適切な場合、パーティションに障害が発生すると、処理能力の大幅な低下やダウンタイムが発生する可能性があります。

*詳細な調査結果を表示するには*：

. Well-architected ステータス タブで、*EVS environment resiliency* を見つけます。
. *表示*を選択して、結果ダイアログを開きます。


ダイアログには次の内容が表示されます：

* *調査結果の概要*：パーティションの不整合の詳細な説明。
* *リソース グリッド*：次の EVS 環境ノードを示すテーブル：
+
** ノード識別子
** 配置グループ名
** 配置グループの種類
** 配置グループのパーティション数


* *必要なアクション*：段階的な修復手順
* *推奨事項*：ベストプラクティスガイダンス


*修復*：

パーティション配置の問題を修正するには：

* EVS 環境に新しいノードを追加する場合は、少なくとも 4 つのパーティションを持つパーティション分割された配置グループを使用して新しいノードをプロビジョニングします。
* クラスター ノードを置き換える場合は、少なくとも4つのパーティションを持つパーティション分割された配置グループを使用して置き換えノードがプロビジョニングされていることを確認します。
* 上記の推奨事項に沿って、すべての EVS ノードを単一の配置グループに統合するようにしてください。


*ベストプラクティスの推奨事項*：

EVS 環境を作成または拡張する場合は、4 つ以上のパーティションで構成された単一のパーティション化された配置グループを使用して、すべてのクラスター ノードをプロビジョニングします。



== 次の手順

適切に設計された洞察を確認し、推奨される変更を実装した後：

* 環境のステータスを常に把握できるように、Well-Architected ステータスタブを毎日監視します。
* 「最適化されていません」という結果が出た場合は、修復手順に従ってください。
* 追加のベストプラクティスについては、AWS とNetAppのドキュメントを確認してください。
* EVS 環境を拡張する前に、推奨事項を実装することを検討してください。


.関連リンク
* https://docs.netapp.com/us-en/workload-vmware/launch-migration-advisor-evs.html["移行アドバイザーを使用して Amazon EVS のデプロイメント計画を作成する"]
* https://docs.netapp.com/us-en/workload-vmware/deploy-fsx-file-system-evs.html["推奨されるFSx for ONTAPファイルシステムを導入"]
* https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html["AWS プレースメントグループのドキュメント"^]

